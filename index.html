<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Build with GenAI</title>
    
    <!-- Open Graph Meta Tags (for Facebook, LinkedIn, etc.) -->
    <meta property="og:title" content="Build with GenAI">
    <meta property="og:description" content="A curated collection of videos about building with Generative AI tools and techniques by Victor del Rosal at fiveinnolabs">
    <meta property="og:image" content="https://victordelrosal.github.io/buildwithGenAI/images/buildwithGenAI-preview.png">
    <meta property="og:url" content="https://victordelrosal.github.io/buildwithGenAI/">
    <meta property="og:type" content="website">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Build with GenAI">
    <meta name="twitter:description" content="A curated collection of videos about building with Generative AI tools and techniques by Victor del Rosal at fiveinnolabs">
    <meta name="twitter:image" content="https://victordelrosal.github.io/buildwithGenAI/images/buildwithGenAI-preview.png">

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>â¬Ÿ</text></svg>">
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: white; }
        .container { max-width: 1000px; margin: auto; padding: 80px 20px 20px; }
        .search-box { 
            width: 100%; 
            padding: 10px 10px 10px 10px; 
            border: 1px solid #ccc; 
            border-radius: 5px; 
            box-sizing: border-box;
        }
        @media (min-width: 768px) {
            .search-box {
                width: 200px; /* Approximately 4 words width */
            }
        }
        .filters { margin: 20px 0; display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }
        .filter { 
            padding: 8px 12px; 
            border: 1px solid #ccc; 
            border-radius: 5px; 
            cursor: pointer; 
            background-color: white;
            transition: all 0.2s ease;
            font-size: 1.1em; /* Increased from default */
        }
        .filter.active { 
            background-color: #007bff; 
            color: white; 
            border-color: #0056b3;
        }
        .search-box.active {
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
        }
        .video-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        .video-card { 
            border: none; 
            box-shadow: 0 4px 6px rgba(0,0,0,0.1); 
            transition: transform 0.2s ease, box-shadow 0.2s ease; 
            background: white;
            display: flex;
            flex-direction: column;
        }
        .video-card:hover { transform: translateY(-5px); box-shadow: 0 8px 12px rgba(0,0,0,0.15); }
        .video-card iframe { width: 100%; height: 180px; }
        .video-info { 
            padding: 10px;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }
        .video-info h3 {
            margin-top: 0;
        }
        .video-info .tags {
            margin-top: auto;
            padding-top: 10px;
        }
        .tag { display: inline-block; background: #eee; padding: 5px 8px; margin: 2px; border-radius: 5px; font-size: 12px; }
        .search-container {
            display: none;
        }
        .search-clear {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: #999;
            font-weight: bold;
            display: none;
            font-size: 14px;
            padding: 4px;
            line-height: 1;
        }
        .search-clear:hover {
            color: #666;
        }
        @media (min-width: 768px) {
            .search-container {
                width: 150px;  /* Changed from 200px to 150px */
            }
            .search-box {
                width: 100%;
            }
        }
        .signup-section {
            background-color: #f5f5f5;
            padding: 15px 10px;  /* Reduced from 60px to 30px */
            margin-top: 20px;
        }
        .signup-container {
            max-width: 440px;
            margin: 0 auto;
        }
        .signup-legend {
            color: #555;
            font-size: 1.1em;
            margin-bottom: 10px;  /* Reduced from 20px to 10px */
            text-align: center;
        }
        /* ConvertKit form specific styles */
        .formkit-form[data-uid="b5d76893e5"] {
            margin: 0 auto !important;
            max-width: 100% !important;
            padding: 0 !important;
        }
        .formkit-form[data-uid="b5d76893e5"] * {
            padding: 8px !important;  /* Reduce default padding */
        }
        .welcome-text {
            color: #666;
            font-size: 1.1em;
            margin-bottom: 30px;
        }
        .site-footer {
            background-color: #333;
            color: #fff;
            padding: 20px;
            text-align: center;
        }
        .site-footer a {
            color: #fff;
            text-decoration: underline;
            font-style: italic;
        }
        .site-footer a:hover {
            opacity: 0.9;
        }
        /* Hide ConvertKit attribution */
        .formkit-powered-by-convertkit-container {
            display: none !important;
        }
        .formkit-attribution {
            display: none !important;
        }

        /* Loading skeleton animation */
        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }

        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 1000px 100%;
            animation: shimmer 2s infinite linear;
            border-radius: 4px;
        }

        .skeleton-card {
            height: 300px;
            margin-bottom: 20px;
        }

        /* Modern filters */
        .filters select {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23007CB2%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.4-12.8z%22%2F%3E%3C%2Fsvg%3E");
            background-repeat: no-repeat;
            background-position: right 0.7em top 50%;
            background-size: 0.65em auto;
            padding-right: 2em !important;
        }

        /* Fade in animation for cards */
        .video-card {
            opacity: 0;
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Responsive improvements */
        @media (max-width: 768px) {
            .filters {
                flex-direction: column;
                align-items: stretch;
            }
            
            .filter {
                width: 100%;
                margin: 5px 0;
            }

            .search-container {
                width: 100%;
            }

            .video-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Share buttons styling */
        .share-buttons {
            display: flex;
            gap: 15px;
            margin-top: 15px;
            padding: 15px 0;
            border-top: 1px solid #eee;
            justify-content: center;
        }
        
        .share-button {
            width: 40px;
            height: 40px;
            border: 1px solid #ddd;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            position: relative;
            padding: 0;
        }
        
        .share-button svg {
            width: 20px;
            height: 20px;
            fill: #666;
            transition: fill 0.2s ease;
        }
        
        .share-button:hover {
            border-color: #444;
            transform: translateY(-2px);
        }
        
        .share-button:hover svg {
            fill: #444;
        }

        /* Remove old color specific styles */
        .share-whatsapp, 
        .share-twitter, 
        .share-bluesky, 
        .share-linkedin,
        .share-copy { 
            background: white; 
        }
        
        /* Update Bluesky icon to match grayscale */
        .share-button.share-bluesky img {
            width: 20px;
            height: 20px;
            filter: grayscale(1) brightness(0.4);
            transition: filter 0.2s ease;
        }
        
        .share-button.share-bluesky:hover img {
            filter: grayscale(1) brightness(0.3);
        }

        /* Tooltip styling */
        .share-button::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            background: rgba(0,0,0,0.8);
            color: white;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease;
            margin-bottom: 8px;
        }

        .share-button:hover::after {
            opacity: 1;
            visibility: visible;
        }
        
        /* Keep the existing color schemes */
        .share-whatsapp { background: #25D366; }
        .share-twitter { background: #000000; }
        .share-bluesky { background: #0560ff; }
        .share-linkedin { background: #0077b5; }

        /* Add new thumbnail styles */
        .video-thumbnail {
            position: relative;
            width: 100%;
            aspect-ratio: 16/9;
            background: #f0f0f0;
            cursor: pointer;
            overflow: hidden;
        }
        
        .video-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .video-thumbnail:hover img {
            transform: scale(1.05);
        }
        
        .play-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.8;
            transition: opacity 0.3s ease;
        }
        
        .play-button::after {
            content: '';
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 10px 0 10px 20px;
            border-color: transparent transparent transparent white;
            margin-left: 4px;
        }
        
        .video-thumbnail:hover .play-button {
            opacity: 1;
            background: rgba(0, 0, 0, 0.8);
        }

        .video-wrapper {
            display: none;
            width: 100%;
            aspect-ratio: 16/9;
        }

        /* Add specific style for BlueSky icon */
        .share-button.share-bluesky img {
            width: 18px;
            height: 18px;
            filter: brightness(0) invert(1); /* Make the SVG white */
        }

        /* Add navbar styles */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background-color: #fff;
            border-bottom: 1px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 1000;
        }
        .navbar-left,
        .navbar-right {
            display: flex;
            align-items: center;
        }
        .nav-logo {
            display: flex;
            align-items: center;
            margin-right: 20px;
        }
        
        .nav-logo img {
            height: 30px;
            width: auto;
        }
        
        .nav-link {
            margin-left: 24px;
            text-decoration: none;
            color: #666;
            font-size: 0.95em;
            display: flex;
            align-items: center;
            position: relative;
            transition: color 0.2s ease;
        }
        
        .nav-link svg {
            width: 20px;
            height: 20px;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            fill: none;
        }
        
        .nav-link:hover {
            color: #000;
            text-decoration: none;
        }
        
        .nav-link span {
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease;
            margin-top: 5px;
        }
        
        .nav-link:hover span {
            opacity: 1;
            visibility: visible;
        }

        /* Add copy URL button style */
        .share-copy { background: #666; }
        
        /* Add copy success animation */
        @keyframes copySuccess {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        .copy-success {
            animation: copySuccess 0.3s ease;
        }

        /* Add navigation buttons styles */
        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }
        
        .nav-button {
            width: 40px;
            height: 40px;
            border: 1px solid #ddd;
            border-radius: 50%;
            background: white;
            color: #666;
            font-size: 1.2em;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            position: relative;
        }
        
        .nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .nav-button:not(:disabled):hover {
            border-color: #007bff;
            color: #007bff;
            transform: translateY(-2px);
        }
        
        .nav-button::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            background: rgba(0,0,0,0.8);
            color: white;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease;
            margin-bottom: 5px;
        }
        
        .nav-button:hover::after {
            opacity: 1;
            visibility: visible;
        }

        /* Update share buttons to be exclusively grayscale */
        .share-buttons {
            display: flex;
            gap: 15px;
            margin-top: 15px;
            padding: 15px 0;
            border-top: 1px solid #eee;
            justify-content: center;
        }

        .share-button {
            width: 40px;
            height: 40px;
            border: 1px solid #ddd;
            border-radius: 50%;
            background: #f0f0f0;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            position: relative;
            padding: 0;
        }

        .share-button svg {
            width: 20px;
            height: 20px;
            fill: #666;
            transition: fill 0.2s ease;
        }

        .share-button:hover {
            border-color: #444;
            background: #e0e0e0;
            transform: translateY(-2px);
        }

        .share-button:hover svg {
            fill: #222;
        }

        /* Reset all share button backgrounds to grayscale */
        .share-whatsapp,
        .share-twitter,
        .share-bluesky,
        .share-linkedin,
        .share-copy {
            background: #f5f5f5 !important;
        }

        /* Update Bluesky icon to match grayscale */
        .share-button.share-bluesky img {
            width: 18px;
            height: 18px;
            filter: grayscale(1) brightness(0.4);
            transition: filter 0.2s ease;
        }

        .share-button.share-bluesky:hover img {
            filter: grayscale(1) brightness(0.3);
        }

        /* Remove any lingering color-specific styles */
        .share-button::after {
            margin-bottom: 8px;
            background: rgba(0, 0, 0, 0.8);
        }
    </style>
</head>
<body>
    <!-- Add navbar -->
    <nav class="navbar">
        <div class="navbar-left">
            <a href="https://victordelrosal.github.io/buildwithGenAI" class="nav-logo">
                <img src="https://victordelrosal.github.io/buildwithGenAI/images/logo.png" alt="fiveinnolabs logo">
            </a>
            <div class="nav-search">
                <input type="text" id="search" class="search-box" placeholder="Search...">
                <span class="search-clear" id="search-clear">âœ•</span>
            </div>
        </div>
        <div class="navbar-right">
            <a href="https://victordelrosal.github.io/buildwithGenAI/?video=dFSnam97YbQ" class="nav-link">
                <svg viewBox="0 0 24 24">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
                <span>Start here</span>
            </a>
            <a href="https://victordelrosal.com" class="nav-link">
                <svg viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="16" x2="12" y2="12"></line>
                    <line x1="12" y1="8" x2="12.01" y2="8"></line>
                </svg>
                <span>About Us</span>
            </a>
            <a href="https://humanlikebook.com" class="nav-link">
                <svg viewBox="0 0 24 24">
                    <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                    <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                </svg>
                <span>Book</span>
            </a>
            <a href="https://bit.ly/genAI-fiveinnolabs" class="nav-link">
                <svg viewBox="0 0 24 24">
                    <line x1="12" y1="2" x2="12" y2="6"></line>
                    <line x1="12" y1="18" x2="12" y2="22"></line>
                    <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                    <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                    <line x1="2" y1="12" x2="6" y2="12"></line>
                    <line x1="18" y1="12" x2="22" y2="12"></line>
                    <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                    <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
                </svg>
                <span>Resources</span>
            </a>
            <a href="#" class="nav-link">
                <svg viewBox="0 0 24 24">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
                <span>Login</span>
            </a>
        </div>
    </nav>

    <div class="container">
        <h1>â¬Ÿ Build with GenAI</h1>
        <p class="welcome-text">Everyone can build with generative AI. Sharing my learning journey...</p>
        <div class="filters">
            <button id="clear-filters" class="filter">Clear all filters</button>
            <select id="tracks-filter" class="filter">
                <option value="all">Tracks</option>
            </select>
            <select id="complexity-filter" class="filter">
                <option value="all">Complexity</option>
                <option value="Beginner">Beginner</option>
                <option value="Intermediate">Intermediate</option>
                <option value="Advanced">Advanced</option>
            </select>
            <select id="tools-filter" class="filter">
                <option value="all">Tools</option>
            </select>
            <select id="keywords-filter" class="filter">
                <option value="all">Keywords</option>
            </select>
            <select id="date-filter" class="filter">
                <option value="all">Date</option>
                <option value="last-week">Last Week</option>
                <option value="last-month">Last Month</option>
                <option value="last-quarter">Last Quarter</option>
                <option value="last-year">Last Year</option>
            </select>
        </div>
        <div id="video-list" class="video-grid"></div>
        <div class="nav-buttons">
            <button id="prev-button" class="nav-button" data-tooltip="Previous" disabled>&lt;</button>
            <button id="next-button" class="nav-button" data-tooltip="Next" disabled>&gt;</button>
        </div>
    </div>
    
    <div class="signup-section">
        <div class="signup-container">
            <p class="signup-legend">Get an email alert when a new video is added:</p>
            <script async data-uid="b5d76893e5" src="https://fiveinnovators.kit.com/b5d76893e5/index.js"></script>
        </div>
    </div>

    <footer class="site-footer">
        Brought to you by â¬Ÿ fiveinnolabs and Victor del Rosal, author of <a href="http://www.humanlikebook.com" target="_blank">HUMANLIKE: the AI Transformation</a>
    </footer>

    <script>
        let currentPage = 0;
        let totalVideos = [];
        let filteredVideos = []; // Add this new variable to track filtered results
        const videosPerPage = 6;

        async function fetchVideos() {
            let videos = [];
            let allVideos = [];
            let index = 1;
            
            // First collect all videos
            while (true) {
                try {
                    const response = await fetch(`https://victordelrosal.github.io/buildwithGenAI/videos/vid${String(index).padStart(4, '0')}.json`);
                    if (!response.ok) break;
                    const videoData = await response.json();
                    allVideos.push(videoData);
                    index++;
                } catch (error) {
                    break;
                }
            }
            
            totalVideos = allVideos.reverse();
            filteredVideos = totalVideos; // Initialize filteredVideos with all videos
            updateNavigationButtons();
            return totalVideos.slice(currentPage * videosPerPage, (currentPage + 1) * videosPerPage);
        }

        function getUniqueFilterValues(videos) {
            const tools = new Set();
            const keywords = new Set();
            const complexities = new Set();
            const tracks = new Set();

            videos.forEach(video => {
                video.tools?.forEach(tool => tools.add(tool));
                video.keywords?.forEach(keyword => keywords.add(keyword));
                video.track?.forEach(track => tracks.add(track)); // Handle track as array
                if (video.complexity) complexities.add(video.complexity);
            });

            return {
                tools: Array.from(tools).sort(),
                keywords: Array.from(keywords).sort(),
                complexities: Array.from(complexities).sort(),
                tracks: Array.from(tracks).sort()
            };
        }

        function populateFilterDropdowns(filterValues) {
            const toolsFilter = document.getElementById('tools-filter');
            const keywordsFilter = document.getElementById('keywords-filter');
            const complexityFilter = document.getElementById('complexity-filter');
            const tracksFilter = document.getElementById('tracks-filter');

            // Reset filters
            toolsFilter.innerHTML = '<option value="all">Tools</option>';
            keywordsFilter.innerHTML = '<option value="all">Keywords</option>';
            complexityFilter.innerHTML = '<option value="all">Complexity</option>';
            tracksFilter.innerHTML = '<option value="all">Tracks</option>';

            // Add track options dynamically from the data
            filterValues.tracks.forEach(track => {
                tracksFilter.innerHTML += `
                    <option value="${track}">${track}</option>
                `;
            });

            // Add complexity options
            const complexityOrder = ['Beginner', 'Intermediate', 'Advanced'];
            complexityOrder.forEach(complexity => {
                complexityFilter.innerHTML += `<option value="${complexity}">${complexity}</option>`;
            });

            // Add tool and keyword options
            filterValues.tools.forEach(tool => {
                toolsFilter.innerHTML += `<option value="${tool}">${tool}</option>`;
            });
            filterValues.keywords.forEach(keyword => {
                keywordsFilter.innerHTML += `<option value="${keyword}">${keyword}</option>`;
            });
        }

        async function initialize() {
            document.body.style.opacity = '0';
            const videos = await fetchVideos();
            const filterValues = getUniqueFilterValues(videos);
            populateFilterDropdowns(filterValues);
            handleDirectVideoLink(); // Add this line
            if (!window.location.search.includes('video=')) {
                renderVideos(videos);
                preloadThumbnails(videos); // Add this line
            }
            updateFilters();
            
            // Fade in the entire page
            document.body.style.transition = 'opacity 0.5s ease';
            document.body.style.opacity = '1';
        }

        const videoList = document.getElementById('video-list');
        const searchInput = document.getElementById('search');
        const complexityFilter = document.getElementById('complexity-filter');
        const dateFilter = document.getElementById('date-filter');
        const clearFilters = document.getElementById('clear-filters');
        
        function generateShareUrls(video) {
            const baseUrl = 'https://victordelrosal.github.io/buildwithGenAI/';
            const videoUrl = `${baseUrl}?video=${video.id}`;
            
            // Platform-specific share texts
            const whatsappText = encodeURIComponent(`Check out "${video.title}" ${videoUrl}`);
            const twitterText = encodeURIComponent(`Check out "${video.title}" ${videoUrl} by @victordelrosal @fiveinnolabs`);
            const blueskyText = encodeURIComponent(`Check out "${video.title}" ${videoUrl} by @victordelrosal.com`);
            const linkedinText = encodeURIComponent(`Check out "${video.title}" by @Victor del Rosal ${videoUrl}`);
            
            return {
                whatsapp: `https://wa.me/?text=${whatsappText}`,
                twitter: `https://twitter.com/intent/tweet?text=${twitterText}`,
                bluesky: `https://bsky.app/intent/compose?text=${blueskyText}`,
                linkedin: `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(videoUrl)}&title=${linkedinText}`
            };
        }

        function renderVideos(videos) {
            videoList.innerHTML = '';
            
            if (videos.length === 0) {
                videoList.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 40px;">
                        <h3>No videos found</h3>
                        <p>Try adjusting your filters</p>
                    </div>
                `;
                return;
            }

            // Show loading skeletons first
            videoList.innerHTML = Array(3).fill(0).map(() => `
                <div class="video-card skeleton skeleton-card"></div>
            `).join('');

            // Render actual videos with delay for smooth transition
            setTimeout(() => {
                videoList.innerHTML = '';
                videos.forEach((video, index) => {
                    const shareUrls = generateShareUrls(video);
                    const videoCard = document.createElement('div');
                    videoCard.className = 'video-card';
                    videoCard.style.animationDelay = `${index * 100}ms`;
                    
                    // Get the highest quality thumbnail available
                    const thumbnailUrls = [
                        `https://img.youtube.com/vi/${video.id}/maxresdefault.jpg`,
                        `https://img.youtube.com/vi/${video.id}/sddefault.jpg`,
                        `https://img.youtube.com/vi/${video.id}/hqdefault.jpg`,
                        `https://img.youtube.com/vi/${video.id}/mqdefault.jpg`
                    ];

                    videoCard.innerHTML = `
                        <div class="video-thumbnail" data-video-id="${video.id}">
                            <img src="${thumbnailUrls[0]}" 
                                 onerror="this.onerror=null; this.src='${thumbnailUrls[1]}'; this.onerror=null;"
                                 alt="${video.title}"
                                 loading="lazy">
                            <div class="play-button"></div>
                        </div>
                        <div class="video-wrapper" id="video-${video.id}">
                            <iframe src="about:blank" 
                                    data-src="https://www.youtube.com/embed/${video.id}?autoplay=1" 
                                    allowfullscreen 
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture">
                            </iframe>
                        </div>
                        <div class="video-info">
                            <h3>${video.title}</h3>
                            <p>${video.description}</p>
                            <div class="tags" style="display: flex; flex-wrap: wrap; gap: 5px;">
                                ${video.tools.map(tool => `
                                    <span class="tag" style="opacity: 0; animation: fadeIn 0.3s ease forwards ${index * 100 + 300}ms">
                                        ${tool}
                                    </span>
                                `).join('')}
                            </div>
                            <div class="share-buttons">
                                <button onclick="copyVideoUrl('${video.id}')" 
                                        class="share-button share-copy"
                                        data-tooltip="Copy URL">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" fill="currentColor"/>
                                    </svg>
                                </button>
                                <button onclick="window.open('${shareUrls.whatsapp}', '_blank')" 
                                        class="share-button share-whatsapp"
                                        data-tooltip="Share on WhatsApp">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                                    </svg>
                                </button>
                                <button onclick="window.open('${shareUrls.twitter}', '_blank')" 
                                        class="share-button share-twitter"
                                        data-tooltip="Share on X">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                                    </svg>
                                </button>
                                <button onclick="window.open('${shareUrls.bluesky}', '_blank')" 
                                        class="share-button share-bluesky"
                                        data-tooltip="Share on Bluesky">
                                    <img src="https://victordelrosal.github.io/buildwithGenAI/images/Bluesky_Logo.svg" 
                                         alt="Bluesky"
                                         width="18"
                                         height="18">
                                </button>
                                <button onclick="window.open('${shareUrls.linkedin}', '_blank')" 
                                        class="share-button share-linkedin"
                                        data-tooltip="Share on LinkedIn">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    `;

                    videoList.appendChild(videoCard);

                    // Add click handler for thumbnail
                    const thumbnail = videoCard.querySelector('.video-thumbnail');
                    const videoWrapper = videoCard.querySelector('.video-wrapper');
                    
                    thumbnail.addEventListener('click', () => {
                        thumbnail.style.display = 'none';
                        videoWrapper.style.display = 'block';
                        const iframe = videoWrapper.querySelector('iframe');
                        iframe.src = iframe.dataset.src;
                    });
                });
            }, 500);
        }

        // Add thumbnail preloading function
        function preloadThumbnails(videos) {
            videos.forEach(video => {
                const img = new Image();
                img.src = `https://img.youtube.com/vi/${video.id}/maxresdefault.jpg`;
            });
        }

        // Add smooth transitions for filter changes
        function updateFilters() {
            document.querySelectorAll('.filter').forEach(filter => {
                filter.addEventListener('change', async (e) => {
                    e.target.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        e.target.style.transform = 'scale(1)';
                    }, 100);
                    
                    const videos = await fetchVideos();
                    renderVideos(filterVideos(videos));
                });
            });
        }

        function filterVideos(videos) {
            const query = searchInput.value.toLowerCase();
            const selectedComplexity = complexityFilter.value;
            const selectedTool = document.getElementById('tools-filter').value;
            const selectedKeyword = document.getElementById('keywords-filter').value;
            const selectedTrack = document.getElementById('tracks-filter').value;
            const selectedDate = dateFilter.value;
            const currentDate = new Date();
            
            filteredVideos = totalVideos.filter(video => {
                const videoDate = new Date(video.date);
                let dateMatch = true;
                if (selectedDate !== 'all') {
                    const dateDiff = (currentDate - videoDate) / (1000 * 60 * 60 * 24);
                    if (selectedDate === 'last-week' && dateDiff > 7) dateMatch = false;
                    if (selectedDate === 'last-month' && dateDiff > 30) dateMatch = false;
                    if (selectedDate === 'last-quarter' && dateDiff > 90) dateMatch = false;
                    if (selectedDate === 'last-year' && dateDiff > 365) dateMatch = false;
                }

                // Handle track array safely
                const trackMatch = selectedTrack === 'all' || 
                                 (video.track && Array.isArray(video.track) && 
                                  video.track.includes(selectedTrack));

                return (
                    (selectedComplexity === 'all' || video.complexity === selectedComplexity) &&
                    (selectedTool === 'all' || video.tools?.includes(selectedTool)) &&
                    (selectedKeyword === 'all' || video.keywords?.includes(selectedKeyword)) &&
                    trackMatch &&
                    (query === '' || video.title.toLowerCase().includes(query) || video.description.toLowerCase().includes(query)) &&
                    dateMatch
                );
            });

            currentPage = 0; // Reset to first page when filtering
            updateNavigationButtons();
            return filteredVideos.slice(currentPage * videosPerPage, (currentPage + 1) * videosPerPage);
        }

        function updateNavigationButtons() {
            const prevButton = document.getElementById('prev-button');
            const nextButton = document.getElementById('next-button');
            
            prevButton.disabled = currentPage === 0;
            // Use filteredVideos length instead of totalVideos
            nextButton.disabled = (currentPage + 1) * videosPerPage >= filteredVideos.length;
        }

        searchInput.addEventListener('input', async () => {
            const videos = await fetchVideos();
            const clearButton = document.getElementById('search-clear');
            searchInput.classList.toggle('active', searchInput.value !== '');
            clearButton.style.display = searchInput.value ? 'block' : 'none';
            renderVideos(filterVideos(videos));
        });

        complexityFilter.addEventListener('change', async () => {
            const videos = await fetchVideos();
            complexityFilter.classList.toggle('active', complexityFilter.value !== 'all');
            renderVideos(filterVideos(videos));
        });

        dateFilter.addEventListener('change', async () => {
            const videos = await fetchVideos();
            dateFilter.classList.toggle('active', dateFilter.value !== 'all');
            renderVideos(filterVideos(videos));
        });

        document.getElementById('tools-filter').addEventListener('change', async () => {
            const filter = document.getElementById('tools-filter');
            const videos = await fetchVideos();
            filter.classList.toggle('active', filter.value !== 'all');
            renderVideos(filterVideos(videos));
        });

        document.getElementById('keywords-filter').addEventListener('change', async () => {
            const filter = document.getElementById('keywords-filter');
            const videos = await fetchVideos();
            filter.classList.toggle('active', filter.value !== 'all');
            renderVideos(filterVideos(videos));
        });

        document.getElementById('tracks-filter').addEventListener('change', async () => {
            const filter = document.getElementById('tracks-filter');
            const videos = await fetchVideos();
            filter.classList.toggle('active', filter.value !== 'all');
            renderVideos(filterVideos(videos));
        });

        clearFilters.addEventListener('click', async () => {
            searchInput.value = '';
            complexityFilter.value = 'all';
            dateFilter.value = 'all';
            document.getElementById('tools-filter').value = 'all';
            document.getElementById('keywords-filter').value = 'all';
            document.getElementById('tracks-filter').value = 'all';
            
            // Remove all active classes
            searchInput.classList.remove('active');
            document.querySelectorAll('.filter').forEach(filter => filter.classList.remove('active'));
            document.getElementById('search-clear').style.display = 'none';
            
            currentPage = 0;
            filteredVideos = totalVideos; // Reset filtered videos to all videos
            const videos = filteredVideos.slice(0, videosPerPage);
            renderVideos(videos);
            updateNavigationButtons();
        });

        document.getElementById('search-clear').addEventListener('click', async () => {
            searchInput.value = '';
            searchInput.classList.remove('active');
            document.getElementById('search-clear').style.display = 'none';
            const videos = await fetchVideos();
            renderVideos(filterVideos(videos));
        });

        // Add this function to handle direct video links
        function handleDirectVideoLink() {
            const urlParams = new URLSearchParams(window.location.search);
            const videoId = urlParams.get('video');
            
            if (videoId) {
                fetchVideos().then(videos => {
                    const targetVideo = videos.find(v => v.id === videoId);
                    if (targetVideo) {
                        renderVideos([targetVideo]);
                        // Update meta tags with consistent preview image
                        document.querySelector('meta[property="og:title"]').content = targetVideo.title;
                        document.querySelector('meta[property="og:description"]').content = targetVideo.description;
                        document.querySelector('meta[property="og:image"]').content = 'https://victordelrosal.github.io/buildwithGenAI/images/buildwithGenAI-preview.png';
                        document.querySelector('meta[name="twitter:title"]').content = targetVideo.title;
                        document.querySelector('meta[name="twitter:description"]').content = targetVideo.description;
                        document.querySelector('meta[name="twitter:image"]').content = 'https://victordelrosal.github.io/buildwithGenAI/images/buildwithGenAI-preview.png';
                    }
                });
            }
        }

        function copyVideoUrl(videoId) {
            const url = `https://victordelrosal.github.io/buildwithGenAI/?video=${videoId}`;
            navigator.clipboard.writeText(url).then(() => {
                const copyButton = document.querySelector(`.share-button[onclick="copyVideoUrl('${videoId}')"]`);
                copyButton.classList.add('copy-success');
                copyButton.setAttribute('data-tooltip', 'Copied!');
                setTimeout(() => {
                    copyButton.classList.remove('copy-success');
                    copyButton.setAttribute('data-tooltip', 'Copy URL');
                }, 1500);
            }).catch(err => {
                console.error('Failed to copy:', err);
            });
        }

        document.getElementById('prev-button').addEventListener('click', async () => {
            if (currentPage > 0) {
                currentPage--;
                const videos = filteredVideos.slice(currentPage * videosPerPage, (currentPage + 1) * videosPerPage);
                renderVideos(videos);
                updateNavigationButtons();
            }
        });
        
        document.getElementById('next-button').addEventListener('click', async () => {
            if ((currentPage + 1) * videosPerPage < filteredVideos.length) {
                currentPage++;
                const videos = filteredVideos.slice(currentPage * videosPerPage, (currentPage + 1) * videosPerPage);
                renderVideos(videos);
                updateNavigationButtons();
            }
        });

        initialize();
    </script>
</body>
</html>
